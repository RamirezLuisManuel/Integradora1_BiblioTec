<app-navigation-admin></app-navigation-admin>
<!DOCTYPE html>
<html lang="es" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empresa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./agregarlibro.component.css" rel="stylesheet">
</head>
<body class="d-flex flex-column h-100">
    <main class="flex-shrink-0">
        <div class="container my-5">
            <div class="card shadow-lg">
                <div class="card-body">
                    <h3 class="my-3">Nuevo Libro</h3>
                    <form #form="ngForm" (ngSubmit)="saveNewBook(form)" class="row g-3 needs-validation" novalidate>
                        <div class="col-md-6">
                            <label for="isbn" class="form-label">ISBN</label>
                            <input type="text" id="isbn" class="form-control" [(ngModel)]="book.isbn" name="isbn" required minlength="10" maxlength="13" #isbnInput="ngModel">
                            
                            <!-- Mensaje de error si el campo está vacío -->
                            <div *ngIf="isbnInput.errors?.['required'] && isbnInput.touched" class="invalid-feedback color-message">
                              Este campo es obligatorio.
                            </div>
                          
                            <!-- Mensaje de error si la longitud es menor a 10 -->
                            <div *ngIf="isbnInput.errors?.['minlength'] && isbnInput.touched" class="invalid-feedback">
                              El ISBN debe tener al menos 10 caracteres.
                            </div>
                          
                            <!-- Mensaje de error si la longitud supera los 13 caracteres -->
                            <div *ngIf="isbnInput.errors?.['maxlength'] && isbnInput.touched" class="invalid-feedback">
                              El ISBN no debe superar los 13 caracteres.
                            </div>
                          </div>
                        <div class="col-md-6">
                            <label for="titulo" class="form-label">Título</label>
                            <input type="text" id="titulo" class="form-control" [(ngModel)]="book.titulo" name="titulo" required>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="autor" class="form-label">Autor</label>
                            <input type="text" id="autor" class="form-control" [(ngModel)]="book.autor" name="autor" required>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="tema" class="form-label">Tema</label>
                            <input type="text" id="tema" class="form-control" [(ngModel)]="book.tema" name="tema" required>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-md-2">
                            <label for="tipolibro" class="form-label">Tipo de Libro</label>
                            <select id="tipolibro" class="form-select" [(ngModel)]="book.tipolibro" name="tipolibro" required>
                                <option value="" disabled selected>Seleccione una opción</option>
                                <option value="físico">Físico</option>
                                <option value="digital">Digital</option>
                            </select>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-md-2">
                            <label for="disponibilidad" class="form-label">Disponibilidad</label>
                            <input type="text" id="disponibilidad" class="form-control" [(ngModel)]="book.disponibilidad" name="disponibilidad" required>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-md-5">
                            <label for="imagenlibro" class="form-label">Imagen</label>
                            <textarea id="imagenlibro" class="form-control" [(ngModel)]="book.imagenlibro" name="imagenlibro" rows="1"></textarea>
                        </div>
                        <div class="col-md-6">
                            <label for="descripcion" class="form-label">Descripción</label>
                            <textarea id="descripcion" class="form-control" [(ngModel)]="book.descripcion" name="descripcion" rows="2" required></textarea>
                            <div class="invalid-feedback">Este campo es obligatorio.</div>
                        </div>
                        <div class="col-12">
                            <a href="/crud" class="btn btn-secondary">Regresar</a>
                            <button type="submit" class="btn btn-success">Guardar</button>
                        </div>
                    </form>
                    <div *ngIf="showSuccessMessage" class="alert alert-success" role="alert">
                        El libro ha sido guardado exitosamente.
                    </div>          
                    <div *ngIf="showDuplicateIsbnMessage" class="alert alert-danger" role="alert">
                        El ISBN ingresado ya existe en la base de datos. Por favor, ingrese un ISBN diferente.
                    </div>  
                </div>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
